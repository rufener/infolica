<div id="preavisEdit" class="preavisEdit">

    <!-- TITRE -->
    <md-toolbar>
        <h1>Saisie de préavis pour l'affaire {{ affaire.id }}</h1>
    </md-toolbar>

    <md-card>
        <md-card-content>
            <div class="md-layout md-gutter md-alignment-bottom-space-between">
                <div class="md-layout-item md-size-50">
                    <div class="md-title">Informations générales</div>
                    <br>
                    <table class="tg">
                        <tbody>
                            <tr>
                                <td class="title">Numéro d'affaire</td>
                                <td class="content">{{ affaire.id }}</td>
                            </tr>
                            <tr>
                                <td class="title">Type d'affaire</td>
                                <td class="content">{{ affaire.type_affaire }}</td>
                            </tr>
                            <tr>
                                <td class="title">Cadastre</td>
                                <td class="content">{{ affaire.cadastre }}</td>
                            </tr>
                            <tr>
                                <td class="title">Description</td>
                                <td class="content">{{ affaire.nom }}</td>
                            </tr>
                            <tr>
                                <td class="title">Date de la demande</td>
                                <td class="content">{{ affaire.date_ouverture }}</td>
                            </tr>
                            <tr>
                                <td class="title">Client</td>
                                <td class="content">{{ affaire.client }}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="md-layout-item md-size-50">
                    <!-- MAP -->
                    <div id="mapContainer">
                        <MapHandler ref="mapHandler" />
                    </div>
                </div>
            </div>
        </md-card-content>
    </md-card>


    <md-card>
        <md-card-header>
            <div class="md-title">Documents</div>
        </md-card-header>
        <md-card-content>
            <md-table v-model="documents" md-sort="filename" md-sort-order="asc" md-fixed-header md-card>
                <md-table-empty-state md-label="Aucun document"></md-table-empty-state>
                
                <md-table-row slot="md-table-row" slot-scope="{ item }">
                    <md-table-cell style="width: 50%;" md-label="Fichier" md-sort-by="filename">{{ item.filename }}</md-table-cell>
                    <md-table-cell style="width: 30%;" md-label="Modification" md-sort-by="modification_sort">{{ item.modification }}</md-table-cell>
                    <md-table-cell style="width: 20%;" md-label="Actions">
                        <md-button class="md-icon-button md-dense md-primary" @click="downloadFile(item)">
                            <md-icon>save_alt</md-icon>
                        </md-button>
                    </md-table-cell>
                </md-table-row>
            </md-table>
        </md-card-content>
    </md-card>

    <md-card>
        <md-card-header>
            <div class="md-title">Conversation</div>
        </md-card-header>
        <md-card-content>
            <div class="md-layout md-gutter md-alignment-top-space-between">
                <div class="md-layout-item md-size-50">
                    <md-field>
                        <label>Commentaire</label>
                        <md-textarea v-model="commentaire"></md-textarea>
                    </md-field>
                    
                    <div class="md-layout-item" style="float: right;">
                        <md-button class="md-raised md-primary" @click="saveMessage">Ajouter le commentaire</md-button>
                    </div>
                </div>
                <div class="md-layout-item md-size-50">
                    <md-table v-model="conversation" md-card>
                        <md-table-empty-state md-label="Aucun commentaire"></md-table-empty-state>
                        
                        <md-table-row slot="md-table-row" slot-scope="{ item }">
                            <md-table-cell style="width: 15%;" md-label="Date">{{ item.date }}</md-table-cell>
                            <md-table-cell style="width: 15%;" md-label="Operateur">{{ item.operateur }}</md-table-cell>
                            <md-table-cell style="width: 70%;" md-label="Message">{{ item.message }}</md-table-cell>
                        </md-table-row>
                    </md-table>
                </div>
            </div>

        </md-card-content>
    </md-card>

    <md-card>
        <md-card-header>
            <div class="md-title">Décision</div>
        </md-card-header>
        <md-card-content>
            <md-radio>Préavis positif sans condition</md-radio>
            <md-radio>Préavis positif sous condition</md-radio>
            <md-radio>Préavis négatif</md-radio>
            <md-radio>Pas concerné</md-radio>
            <md-field>
                <label>Remarque</label>
                <md-input></md-input>
            </md-field>
            <md-button class="md-raised md-primary" style="float: right; margin-bottom: 20px;">Enregistrer</md-button>
        </md-card-content>
    </md-card>


    <!-- <div class="rightColumn">
            <md-card class="mapHeight">
                <md-card-content>
                    <div class="md-layout md-gutter">
                        <div class="md-layout-item md-size-30">
                            <md-field>
                                <label>Coordonnées</label>
                                <md-input v-model="[affaire.localisation_e | 0, affaire.localisation_n | 0].join(' / ')" readonly></md-input>
                            </md-field>
                        </div>
                        <div style="text-align: right;" class="md-layout-item">
                            <md-button style="background-color: lightgray;" class="md-raised" @click="openSitnTheme('cadastre')">Cadastre</md-button>
                            <md-button style="background-color: lightgray;" class="md-raised" @click="openSitnTheme('sites_pollues')">Sites Pollués</md-button>
                            <md-button style="background-color: lightgray;" class="md-raised" @click="openSitnTheme('amenagement_territoire')">Aménagement du territoire</md-button>
                        </div>
                        <div class="md-layout-item md-size-100" v-if="showMovePointComment">
                            <p style="color: blue; margin-top: 0px;">Pour modifier les coordonnées, déplacer la pastille sur la carte.</p>
                        </div>
                        <div id="mapContainer">
                            <MapHandler ref="mapHandler" />
                        </div>
                    </div>
                </md-card-content>
            </md-card>
        </div> -->

</div>